# Chapter 11. 예외와 에러처리

예외 처리는 에러를 컨트롤하는 메커니즘이다.
에러 처리라고 하지 않고 예외 처리라고 하는 이유는 예상치 못한 상황에 대처하는 방식이기 때문이다.

예상한 에러와 예상치 못한 에러(예외)를 구분하는 기준은 불명확하고 상황에 따라 크게 달라진다.

### 11.1 Error 객체

자바스크립트에는 내장된 Error 객체가 있고 이 객체는 에러 처리에 간편하게 사용할 수 있다.
Error. 인스턴스를 만들면서 에러 메시지를 지정할 수 있다.

이 인스턴스는 에러와 통신하는 수단이다.

에러 메시지는 message 프로퍼티에 잇다.

### 11.2 try/catch와 예외 처리

예외 처리는 try...catch 문을 사용한다.
예상치 못한 에러에 대처하려면 try...catch 문으로 코드 전체를 감쌀 수 있다.

실행 흐름은 에러가 일어나는 즉시 catch 블록으로이동한다.
try 블록 안에 쓸 수 있는 문의 숫자에 제한은 없다.
그중 에러가 일어나는 문에서 실행 흐름을 catch 블록으로 넘긴다.
에러가 일어나지 않으면 catch 블록은 실행되지 않는다.

### 11.3 에러 일으키기

직접 에러를 일으켜서 예외 처리 작업을 시작할 수도 있다.

자바스크립트는 에러를 일으킬 때 꼭 객체만이 아니라 숫자나 문자열 등 어떤 값이든 catch 절에 넘길 수 있다.
하지만 Error 인스턴스를 넘기는 것이 가장 편리하다.

throw를 호출하면 현재 함수는 즉시 실행을 멈춘다.

### 11.4 예외 처리와 호출 스택

완료되지 않은 함수가 쌓이는 것을 호출 스택이라 부른다.

에러를 호출 스택 어디에서든 캐치할 수 있다.
어디에서 이 에러를 캐치하지 않으면 자바스크립트 인터프리터는 프로그램을 멈춘다.
이런 것을 처리하지 않은 예외, 캐치하지 않은 예외라고 부르며 프로그램이 충돌하는 원인이 된다.

에러를 캐치하면 호출 스택에서 문제 해결에 유용한 정보를 얻을 수 있다.

대부분의 자바스크립트 환경에서 Error 인스턴스에는 스택을 문자열로 표현한 stack 프로퍼티가 있다.

### 11.5 try...catch...finally

try 블록의 코드가 HTTP 연결이나 파일 같은 일종의 '자원'을 처리할 때가 있다.
프로그램에서 이 자원을 계속 가지고 있을 수는 없으므로 에러가 있든 없든 어느 시점에서는 이 자원을 해체해야 한다.

이런 상황에서 finally 블록이 필요하다.
finally 블록은 에러가 일어나든, 일어나지 않든 반드시 호출된다.
