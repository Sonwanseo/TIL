# Chapter 10. 맵과 셋

### 10.1 맵

ES6 이전에는 키와 값을 연결하려면 객체를 사용해야 했다.
하지만 객체를 이런 목적으로 사용하면 여러 가지 단점이 발생한다.

- 프로토타입 체인 때문에 의도하지 않은 연결이 생길 수 있다.
- 객체 안에 연결된 키와 값이 몇 개나 되는지 쉽게 알아낼 수 있는 방법이 없다.
- 키는 반드시 문자열이나 심볼이어야 하므로 객체를 키로 써서 값과 연결할 수 없다.
- 객체는 프로퍼티 순서를 전혀 보장하지 않는다.

Map 객체는 이들 결함을 모두 해결했고, 키와 값을 연결할 목적이라면 (문자열만 키로 쓴다 해도) 객체보다 나은 선택이다.

키의 역할을 알아볼 때는 get() 메서드를 쓰면 된다.

맵에 존재하지 않는 키에 get을 호출하면 undefined를 반환한다.
맵에 키가 존재하는지 확인하는 has() 메서드도 있다.

맵에 이미 존재하는 키에 set()을 호출하면 값이 교체된다.

size 프로퍼티는 맵의 요소 숫자(개수)를 반환한다.

keys() 메서드는 맵의 키를, values() 메서드는 값을, entries() 메서드는 첫 번째 요소가 키이고 두 번째 요소가 값인 배열을 각각 반환한다.
이들 메서드가 반환하는 것은 모두 이터러블 객체이므로 for...of 루프를 쓸 수 있다.

이터러블 객체보다 배열이 필요하다면 확산 연산자를 쓰면 된다.

맵의 요소를 지울 때는 delete() 메서드를 사용한다.

맵의 요소를 모두 지울 때는 clear() 메서드를 사용한다.

### 10.2 위크맵

WeakMap은 다음 차이점을 제외하면 Map과 완전히 같다.

- 키는 반드시 객체여야 한다.
- WeakMap의 키는 가비지 콜렉션에 포함될 수 있다.
- WeakMap은 이터러블이 아니며 clear() 메서드도 없다.

일반적으로 자바스크립트는 코드 어딘가에서 객체를 참조하는 한 그 객체를 메모리에 계속 유지한다.
하지만, WeakMap에서는 그렇지 않다.
따라서 WeakMap은 이터러블이 될 수 없다.
가비지 콜렉션 중인 객체를 노출할 위험이 너무 크기 때문이다.

WeakMap의 이런 특징은 객체 인스턴스 전용 키를 저장하기에 알맞다.

### 10.3 셋

셋은 중복을 허용하지 않는 데이터 집합이다.

사용자 역할을 추가할 때는 add() 메서드를 사용한다.

Map과 마찬가지로 Set에도 size 프로퍼티가 있다.

셋의 장점은 아주 단순하다.
추가하려는 것이 셋에 이미 있는지 확인할 필요가 없다.

역할을 제거할 때는 delete()를 호출한다.
제거에 성공했다면, 즉 그런 역할이 셋에 존재했다면 true를 반환하고, 그렇지 않다면 false를 반환한다.

### 10.4 위크셋

위크셋은 객체만 포함할 수 있으며, 이 객체들은 가비지 콜렉션의 대상이 된다.
WeakMap과 마찬가지로 WeakSet은 이터러블이 아니므로 위크셋의 용도는 매우 적다.
위크셋의 실제 용도는 주어진 객체가 셋 안에 존재하는지 아닌지를 알아보는 것뿐이다.
