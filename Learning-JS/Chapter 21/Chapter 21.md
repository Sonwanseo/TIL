# Chapter 21. 객체 프로퍼티 설정과 프락시

### 21.1 접근자 프로퍼티 getter과 setter

객체 프로퍼티에는 데이터 프로퍼티와 접근자 프로퍼티 두 가지가 있다.

접근자 프로퍼티는 메서드와 비슷한데, getter와 setter 두 가지 함수로 구성된다는 것과 접근했을 때 함수라기보다는 데이터 프로퍼티와 비슷하게 동작한다는 점이 다르다.
이런 면에서 접근자 프로퍼티를 동적 프로퍼티라고 부르기도 한다.

접근자 프로퍼티를 사용하면 자연스러운 문법을 사용하면서도, 부주의한 접근을 차단하는 장점을 누릴 수 있다.

프로퍼티에 할당할 때는 setter가 호출되고, 할당하는 값이 첫 번째 매개변수로 전달된다.
프로퍼티를 평가할 때는 getter가 호출된다.

### 21.2 객체 프로퍼티 속성

프로퍼티에는 항상 키가 있고, 키는 문자열이나 심볼일 수 있다.
프로퍼티의 값은 어떤 타입이든 괜찮다.
객체의 프로퍼티에는 순서가 없다.
객체 프로퍼티에 접근할 때는 점 연산자나 대괄호 연산자를 사용한다.
객체 프로퍼티는 식별자를 키로 사용하는 일반적인 프로퍼티, 심볼이나 표현식을 사용하는 계산된 프로퍼티, 메서드 단축 표기의 세 가지가 있다.

프로퍼티 속성 세 가지

- 쓰기 가능한지
  프로퍼티 값을 바꿀 수 있는지 아닌지 판단한다.

- 나열 가능한지
  for ...in 문이나 Object.keys, 확산 연산자에서 객체 프로퍼티를 나열할 때 해당 프로퍼티가 포함될지 아닌지 판단한다.

- 설정 가능한지
  프로퍼티를 객체에서 삭제하거나 속성을 수정할 수 있는지 아닌지 판단한다.

Object.defineProperty를 써서 객체에 새 프로퍼티를 추가할 수도 있다.

Object.defineProperty로 데이터 프로퍼티를 추가할 때는 value 프로퍼티를 사용하면 된다.

Object.defineProperty는 배열 프로퍼티를 나열할 수 없게 만들 때 주로 사용한다.

Object.defineProperties 메서드는 객체 프로퍼티 이름과 프로퍼티 정ㅇ의를 서로 연결한다.

### 21.3 객체 보호: 동결, 봉인, 확장 금지

자바스크립트에는 객체를 보호해서 의도하지 않은 수정을 막고, 의도적인 공격은 더 어렵게 만드는 세 가지 메커니즘이 있다.
동결, 봉인, 확장 금지이다.

동결된 객체는 수정할 방법이 없다.

객체를 동결하면 다음과 같은 작업이 불가능해진다.

- 프로퍼티 값 수정 도는 할당
- 프로퍼티 값을 수정하는 메서드 호출
- setter 호출
- 새 프로퍼티 추가
- 새 메서드 추가
- 기존 프로퍼티나 메서드의 설정 변경

객체를 동결하면 상태를 바꾸는 메서드가 모두 쓸모없어지므로 데이터만 들어있는 객체에서 가장 유용하다.

객체를 동결할 때는 Object.freeze를 사용하고, 객체가 동결됐는지 확인할 때는 Object.isFrozen을 사용한다.

객체를 봉인하면 새 프로퍼티를 추가하거나 기존 프로퍼티를 변경, 삭제할 수 없다.
클래스의 인스턴스를 사용하면서, 인스턴스의 프로퍼티를 수정하는 메서드는 동작하도록 할 때 봉인을 사용할 수 있다.
객체를 봉인할 때는 Object.seal를, 객체가 봉인됐는지 확인할 때는 Object.isSealed를 사용한다.

확장 금지를 사용하면 객체에 새 프로퍼티를 추가하는 것만 금지된다.
프로퍼티에 값을 할당하거나, 삭제하거나, 속성을 변경하는 작업은 모두 허용된다.
확장을 금지할 때는 Object.preventExtensions, 확장이 금지됐는지 확인할 때는 Object.isExtensible을 사용한다.

### 21.4 프락시

프락시는 ES6에서 새로 추가된 메타프로그래밍 기능이다.
메타프로그래밍이란 프로그램이 자기 자신을 수정하는 것을 말한다.

객체 프락시는 간단히 말해 객체에 대한 작업을 가로채고, 필요하다면 작업 자체를 수정하는 기능이다.

프락시는 객체를 대상으로 한 작업을 가로채므로, 정의되지 않은 프로퍼티는 항상 0을 반환하게 만들 수 있다.

Proxy 생성자에 넘기는 첫 번째 매개변수는 타겟, 즉 프락시할 객체이다.
두 번째 매개변수는 가로챌 동작을 가리키는 핸들러이다.
