# Chapter 7. MySQL

변수에 저장했다는 것은 컴퓨터 메모리에 저장했다는 뜻입니다.
서버가 종료되면 메모리가 정리되면서 저장했던 데이터도 사라져 버립니다.
이를 방지하기 위해서는 데이터베이스를 사용해야 합니다.

## 7.1 데이터베이스란?

데이터베이스는 관련성을 가지며 중복이 없는 데이터들의 집합입니다.
이러한 데이터베이스를 관리하는 시스템을 DBMS라고 부릅니다.

보통 서버의 하드 디스크나 SSD 등의 저장 매체에 데이터를 저장합니다.
저장 매체가 고장나거나 사용자가 직접 데이터를 지우지 않는 이상 계속 데이터가 보존되므로 서버 종료 여부와 상관 없이 데이터를 계속 사용할 수 있습니다.

또한, 서버에 데이터베이스를 올리면 여러 사람이 동시에 사용할 수 있습니다.
사람들에게 각각 다른 권한을 주어 어떤 사람은 읽기만 가능하고, 어떤 사람은 모든 작업을 가능하게 할 수 있습니다.

데이터베이스를 관리하는 DBMS 중에는 RDBMS라고 부르는 관계형 DBMS가 많이 사용됩니다.

## 7.4 데이터베이스 및 테이블 생성하기

### 7.4.1 데이터베이스 생성하기

CREATE SCHEMA [데이터베이스명]이 데이터베이스를 생성하는 명령어입니다.
MySQL에서는 데이터베이스와 Schema는 같은 개념입니다.
그 후 use nodejs; 명령어를 추가로 입력하여 앞으로 nodejs 데이터베이스를 사용하겠다는 것을 MySQL에 알립니다.

SQL 구문을 입력할 때는 마지막에 세미콜록(;)을 붙여야 실행됩니다

MySQL이 기본적으로 알고 있는 구문을 예약어라고 부릅니다.

### 7.4.2 테이블 생성하기

테이블이란 데이터가 들어갈 수 있는 틀을 의미합니다.
테이블에 맞는 데이터만 들어갈 수 있습니다.

CREATE TABLE [데이터베이스명.테이블명]은 테이블을 생성하는 명령어입니다.
컬럼을 정의해두면 데이터를 넣을 때 컬럼 규칙에 맞는 정보들만 넣을 수 있습니다.

INT는 정수를 의미합니다.
CHAR은 고정길이고, VARCHAR은 가변길이입니다.
TEXT는 긴 글을 저장할 때 사용합니다.
TINYINT는 -127부터 128까지의 정수를 저장할 때 사용합니다.
DATETIME은 날짜와 시간에 대한 정보를 담고 있습니다.
NULL과 NOT NULL은 빈칸을 허용할지 여부를 묻는 옵션입니다.
AUTO_INCREMENT는 숫자를 저절로 올리겠다는 뜻입니다.
UNSIGNED는 숫자 자료형에 적용되는 옵션입니다.
ZEROFILL은 숫자의 자릿수가 고정되어 있을 때 사용할 수 있습니다. 빈 자리를 모두 0으로 채웁니다.
create_at에는 DEFAULT now()라는 옵션이 붙어 있습니다. 데이터베이스 저장 시 해당 컬럼에 값이 없을 때 MySQL이 기본값을 대신 넣어줍니다. now()는 현재 시각을 넣으라는 뜻입니다.
해당컬럼이 기본 키인 경우에 PRIMARY KEY 옵션을 설정합니다. 기본 키란 로우를 대표하는 고유한 값을 의미합니다. 데이터베이스에 데이터를 넣을 때 로우 단위로 넣습니다.
UNIQUE INDEX는 해당 값이 고유해야 하는지에 대한 옵션입니다.
COMMENT는 테이블에 대한 보충 설명을 의미합니다.
DEFAULT CHARSET을 utf8로 설정하지 않으면 한글이 입력되지 않으니 반드시 설정해야 합니다.
ENGINE은 여러 가지가 있지만, MyISAM과 InnoDB가 제일 많이 사용됩니다.

만들어진 테이블을 확인하는 명령어는 DESC 테이블명입니다.

DROP TABLE [테이블명] 명령어를 입력하면 제거됩니다.

다른 테이블의 기본 키를 저장하는 컬럼을 외래 키라고 부릅니다.
CONSTRAINT [제약조건명] FOREIGN KEY [컬럼명] REFERENCES [참고하는 컬럼명]으로 외래 키를 지정할 수 있습니다.

ON UPDATE와 ON DELETE는 모두 CASCADE로 설정했습니다.
사용자 정보가 수정되거나 삭제되면 그것과 연결된 댓글 정보도 같이 수정하거나 삭제한다는 뜻입니다.
