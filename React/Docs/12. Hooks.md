# 12. Hooks

## Hook의 소개

[깃허브](https://github.com/sangheon-kim/React-docs-analyze/blob/master/src/Pages/10.Hooks/10-1.Hooks_01/README.md)  
[공식문서](https://ko.reactjs.org/docs/hooks-intro.html)

Hook은 React 버전 16.8에 새로 추가되었다.  
Hook을 이용하여 Class 컴포넌트 없이 상태 값과 여러 React 기능을 사용할 수 있다.

사용자 정의 컴포넌트의 종류에는 3가지가 있다.  
클래스 컴포넌트인 PureComponent, Component와 함수 컴포넌트가 있다.

Hook이 나오기 전에는 함수 컴포넌트는 단순히 UI를 받아 표시해주는 정도의 역할에 불과하였고, 컴포넌트 자체로 state를 가질 수 없었다.  
하지만 Hook이 나오고 class 컴포넌트를 작성하지 않고도, state나 lifecycle methods 등의 React 기능을 사용할 수 있다.

### 동기

#### 컴포넌트 사이에서 상태와 관련된 로직을 재사용하기 어렵다.

React는 컴포넌트에 재사용 가능한 행동을 붙이는 방법을 제공하지 않는다.  
이것을 해결하기 위해 render props 그리고 고차 컴포넌트와 같은 패턴을 사용했을 것이다.  
그러나 이런 패턴을 사용할 때 컴포넌트를 재구성해야 하며 코드를 추적하기 어렵게 만든다.

Hook을 사용하면 컴포넌트로부터 상태 관련 로직을 추상화할 수 있다.
이것은 독립적인 테스트와 재사용이 가능하다.
Hook은 계층 변화 없이 상태 관련 로직을 재사용할 수 있도록 도와준다.

#### 복잡한 컴포넌트들은 이해하기 어렵다.

클래스 컴포넌트는 다른 상태 관리 라이브러리에 의해 결합하면 할수록 컴포넌트 재사용을 더욱 어렵게 만든다.  
또한 테스트하기도 어렵다.

Hook을 통해 로직에 기반을 둔 작은 함수로 컴포넌트를 나눌 수 있다.

#### Class는 사람과 기계를 혼동시킨다.

자바스크립트에서 this는 일반적으로 다른 언어들과 다르게 경우에 따라 다르다.  
클래스 컴포넌트는 this가 어떻게 작동하는지 알아야 하고, 이벤트 핸들러가 등록되는 방법을 기억해야 한다.  
또한, Class는 잘 축소되지 않고, 핫 리로드를 깨지기 쉽고 신뢰할 수 없게 만든다.

함수 컴포넌트의 경우에는 Prepack을 활용한 Component Folding이 가능하다.

### 점진적 적용 전략

React로부터 Class를 제거할 계획은 없다.  
미래에도 계속 Class 컴포넌트를 지원할 예정이다.

Hook은 존재하는 코드와 함께 나란히 작동함으로써 점진적으로 적용할 수 있다.

## Hook 개요

[깃허브](https://github.com/sangheon-kim/React-docs-analyze/blob/master/src/Pages/10.Hooks/10-2.Hooks_02/README.md)  
[공식문서](https://ko.reactjs.org/docs/hooks-overview.html)

Hook은 하위 호환성을 가지고 있다.

useState는 인자로 초기 state 값을 하나 받는다.  
이 초기값은 첫 번째 렌더링에만 딱 한번 사용된다.

this.state와는 달리 setState Hook의 state는 객체일 필요가 없다.

##### 여러 state 변수 선언하기

하나의 컴포넌트 내에서 State Hook을 여러 개 사용할 수도 있다.

배열 구조 분해 문법은 useState로 호출된 state 변수들을 다른 변수명으로 할당할 수 있게 해준다.  
대신에 React는 매번 렌더링할 때 useState가 사용된 순서대로 실행한다.

##### 근데 Hook이 뭔가요?

Hook은 함수 컴포넌트에서 React state와 생명주기 기능을 "연동"할 수 있게 해주는 함수다.  
Hook은 class 안에서는 동작하지 않는다.  
대신 class 없이 React를 사용할 수 있게 해준다.

React는 useState 같은 내장 Hook을 제공한다.  
컴포넌트 간에 상태 관련 로직을 재사용하기 위해 Hook을 직접 만드는 것도 가능하다.

## State Hook 사용하기

[깃허브](https://github.com/sangheon-kim/React-docs-analyze/blob/master/src/Pages/10.Hooks/10-2.Hooks_02/README.md)  
[공식문서](https://ko.reactjs.org/docs/hooks-state.html)

### Hook과 함수 컴포넌트

Hook은 React state를 함수 안에서 사용할 수 있게 해준다.

Hook은 클래스 안에서 동작하지 않는다.  
하지만 클래스를 작성하지 않고 사용할 수 있다.

### state 변수 선언하기

함수 컴포넌트는 this를 가질 수 없기 때문에 this.state를 할당하거나 읽을 수 없다.  
대신, useState Hook을 직접 컴포넌트에 호출한다.

useState를 호출하는 것은 state 변수를 선언하는 것이다.  
useState는 클래스 컴포넌트의 this.state가 제공하는 기능과 똑같다.  
일반적으로 일반 변수는 함수가 끝날 때 사라지지만, state 변수는 React에 의해 사라지지 않는다.

useState() Hook의 인자로 넘겨주는 값은 state의 초기 값이다.  
함수 컴포넌트의 state는 클래스와 달리 객체일 필요는 없고, 숫자 타입과 문자 타입을 가질 수 있다.

useState는 state 변수, 해당 변수를 갱신할 수 있는 함수 이 두 가지 쌍을 반환한다.  
이것이 바로 const [count, setCount] = useState()라고 쓰는 이유다.  
클래스 컴포넌트의 this.state.count와 this.setState와 유사하다.

### state 가져오기

클래스 컴포넌트는 count를 보여주기 위해 this.state.count를 사용한다.

반면 함수 컴포넌트는 count를 직접 사용할 수 있다.

### state 갱신하기

클래스 컴포넌트는 count를 갱신하기 위해 this.setState()를 호출한다.

반면 함수 컴포넌트 setCount와 count 변수를 가지고 있으므로 this를 호출하지 않아도 된다.