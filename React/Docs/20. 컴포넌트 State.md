# 20. 컴포넌트 State

### setState는 어떤 일을 하나요?

setState()는 컴포넌트의 state 객체에 대한 업데이트를 실행한다.  
state가 변경되면, 컴포넌트는 리렌더링된다.

### state와 props의 차이점은 무엇인가요?

props("properties"의 줄임말)와 state는 일반 JS 객체다.  
두 객체 모두 렌더링 결과물에 영향을 주는 정보를 갖고 있는데, 한 가지 중요한 방식에서 차이가 있다.  
props는 컴포넌트에 전달되는 반면 state는 컴포넌트 안에서 관리된다.

### 왜 setState가 잘못된 값을 주는 걸까요?

React에서 this.props와 this.state는 모두 렌더링된 값을 나타낸다.

setState 호출은 비동기적으로 이뤄진다.  
따라서 setState 호출 직후 새로운 값이 this.state에 반영될 거라고 믿어서는 안 된다.  
만약 이전 state 값을 기준으로 값을 계산해야 한다면 객체 대신 updater 함수를 전달해야 한다.

### 어떻게 하면 이전 state 값을 기준으로 state 값을 업데이트할 수 있나요?

항상 setState가 가장 최신의 state 값을 사용하도록 보장하기 위해서는 setState에 객체 대신 함수를 전달해야 한다.

### setState에 객체를 전달하는 것과 함수를 전달하는 것은 어떤 차이가 있나요?

updater 함수를 전달하면 updater 함수 안에서 이전 state 값에 접근할 수 있다.  
setState 호출은 일괄적으로 처리되기 때문에 여러 업데이트 사항이 충돌 없이 차례대로 반영되도록 한다.

### 언제 setState가 비동기적인가요?

현재 setState는 이벤트 핸들러 내에서 비동기적이다.

이로 인해 만약 부모와 자식이 모두 click 이벤트에서 setState를 호출한다면 자식은 두 번 렌더링되지 않는다.
대신 React는 브라우저 이벤트가 끝날 시점에 state를 일괄적으로 업데이트한다.  
이는 더 큰 규모의 앱에서 뚜렷한 성능 향상을 만들어낸다.

### 왜 React는 this.state를 동기적으로 업데이트하지 않나요?

모든 컴포넌트가 자신의 이벤트 핸들러에서 setState()를 호출할 때까지 React는 리렌더링을 하지 않고 내부적으로 기다리고 있다.  
이를 통해 불필요한 렌더링을 방지하면서 성능을 향상시킨다.

그러나 왜 React는 리렌더링 대신 즉시 this.state를 업데이트하지 않는지 궁금해 할 수 있다.

여기에는 두 가지 중요한 이유가 존재

- props와 state 사이의 일관성을 해칠 수 있으며 이것은 디버깅하기 매우 힘든 이슈를 야기할 수 있다.
- 현재 작업 중인 새로운 기능들을 구현하기 힘들게 만들 수 있기 때문이다.

### Redux나 MobX 같은 상태 관리 라이브러리를 사용해야 하나요?

아마 필요할 수도 있다.

추가적인 라이브러리를 사용하기 전에 먼저 React에 익숙해지는 게 좋다.  
React만으로도 꽤 복잡한 애플리케이션을 만들 수 있다.